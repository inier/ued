/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.6.1 (May, 2015)

  Copyright (c) 2012, 2015 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/

(function(e,t){typeof define=="function"&&define.amd?define(["$"],t):typeof exports=="object"?module.exports=t():e.Upload=t(window.Zepto||window.jQuery||$)})(this,function(e){"use strict";e.fn.serializeJSON=function(t){var n,r,i,s,o,u,a,f;return a=e.serializeJSON,f=a.setupOpts(t),r=this.serializeArray(),a.readCheckboxUncheckedValues(r,this,f),n={},e.each(r,function(e,t){i=a.splitInputNameIntoKeysArray(t.name,f),s=i.pop(),s!=="skip"&&(o=a.parseValue(t.value,s,f),f.parseWithFunction&&s==="_"&&(o=f.parseWithFunction(o,t.name)),a.deepSet(n,i,o,f))}),n},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:undefined,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},"boolean":function(e){var t=["false","null","undefined","","0"];return t.indexOf(e)===-1},"null":function(e){var t=["false","null","undefined","","0"];return t.indexOf(e)===-1?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(t){return e.serializeJSON.parseValue(t,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})}},useIntKeysAsArrayIndex:!1},setupOpts:function(t){var n,r,i,s,o,u;u=e.serializeJSON,t==null&&(t={}),i=u.defaultOptions||{},r=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(n in t)if(r.indexOf(n)===-1)throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+r.join(", "));return s=function(e){return t[e]!==!1&&t[e]!==""&&(t[e]||i[e])},o=s("parseAll"),{checkboxUncheckedValue:s("checkboxUncheckedValue"),parseNumbers:o||s("parseNumbers"),parseBooleans:o||s("parseBooleans"),parseNulls:o||s("parseNulls"),parseWithFunction:s("parseWithFunction"),typeFunctions:e.extend({},s("defaultTypes"),s("customTypes")),useIntKeysAsArrayIndex:s("useIntKeysAsArrayIndex")}},parseValue:function(t,n,r){var i,s;return s=e.serializeJSON,i=r.typeFunctions&&r.typeFunctions[n],i?i(t):r.parseNumbers&&s.isNumeric(t)?Number(t):!r.parseBooleans||t!=="true"&&t!=="false"?r.parseNulls&&t=="null"?null:t:t==="true"},isObject:function(e){return e===Object(e)},isUndefined:function(e){return e===void 0},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var t,n=[];for(t in e)n.push(t);return n},splitInputNameIntoKeysArray:function(t,n){var r,i,s,o,u;return u=e.serializeJSON,o=u.extractTypeFromInputName(t,n),i=o[0],s=o[1],r=i.split("["),r=e.map(r,function(e){return e.replace(/\]/g,"")}),r[0]===""&&r.shift(),r.push(s),r},extractTypeFromInputName:function(t,n){var r,i,s;if(r=t.match(/(.*):([^:]+)$/)){s=e.serializeJSON,i=s.optionKeys(n?n.typeFunctions:s.defaultOptions.defaultTypes),i.push("skip");if(i.indexOf(r[2])!==-1)return[r[1],r[2]];throw new Error("serializeJSON ERROR: Invalid type "+r[2]+" found in input name '"+t+"', please use one of "+i.join(", "))}return[t,"_"]},deepSet:function(t,n,r,i){var s,o,u,a,f,l;i==null&&(i={}),l=e.serializeJSON;if(l.isUndefined(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||n.length===0)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");s=n[0];if(n.length===1)s===""?t.push(r):t[s]=r;else{o=n[1],s===""&&(a=t.length-1,f=t[a],l.isObject(f)&&(l.isUndefined(f[o])||n.length>2)?s=a:s=a+1);if(o===""){if(l.isUndefined(t[s])||!e.isArray(t[s]))t[s]=[]}else if(i.useIntKeysAsArrayIndex&&l.isValidArrayIndex(o)){if(l.isUndefined(t[s])||!e.isArray(t[s]))t[s]=[]}else if(l.isUndefined(t[s])||!l.isObject(t[s]))t[s]={};u=n.slice(1),l.deepSet(t[s],u,r,i)}},readCheckboxUncheckedValues:function(t,n,r){var i,s,o,u,a;r==null&&(r={}),a=e.serializeJSON,i="input[type=checkbox][name]:not(:checked):not([disabled])",s=n.find(i).add(n.filter(i)),s.each(function(n,i){o=e(i),u=o.attr("data-unchecked-value"),u?t.push({name:i.name,value:u}):a.isUndefined(r.checkboxUncheckedValue)||t.push({name:i.name,value:r.checkboxUncheckedValue})})}}});