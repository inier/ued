(function(e,t){typeof define=="function"&&define.amd?define(["$"],t):typeof exports=="object"?module.exports=t():e.Area=t(window.Zepto||window.jQuery||$)})(this,function(e){return{init:function(t){e.get(t,function(t){e(".area-input").each(function(){var n=e(".province .area-content",this),r=e(".city .area-content ul",this),i=e(".downtown .area-content ul",this),s=[t.data],o=e("<div/>");for(var u=0,a=s.length;u<a;u++){var f=e("<ul/>"),l=s[u];for(var c=0,h=l.length;c<h;c++){var p=e('<li data-value="'+s[u][c].id+'">'+s[u][c].name+"</li>");f.append(p);var d=s[u][c].child||[];p.click(function(t,n){r.children().hide();var s=r.closest(".area");e(s.children("input")).val(""),e(s.children("span")).html("-- 城市 --"),i.children().hide();var o=i.closest(".area");return e(o.children("input")).val(""),e(o.children("span")).html("-- 市区 --"),(e(this).data("child")||e([])).each(function(){e(this).show()}),n});var v=e("#hd_province");v.val()==s[u][c].id&&(v.next().html(s[u][c].name),function(e){setTimeout(function(){e.trigger("click",!1)})}(p));for(var m=0,g=d.length;m<g;m++){if(!d[m])continue;var y=e('<li data-value="'+d[m].id+'" >'+d[m].name+"</li>"),b=p.data("child",p.data("child")||[]);b.push(y),p.data("child",b),p.data("child"),y.hide(),r.append(y),y.click(function(t,n){return i.children().hide(),(e(this).data("child")||e([])).each(function(){e(this).show()}),n});var v=e("#hd_city");if(v.val()==d[m].id){var w=d[m].name;(function(e,t){setTimeout(function(){e.next().html(w),t.trigger("click",!1)},20)})(v,y)}var E=d[m].child||[];for(var S=0,x=E.length;S<x;S++){if(!E[S])continue;var T=e('<li data-value="'+E[S].id+'">'+E[S].name+"</li>"),b=y.data("child",y.data("child")||[]);b.push(T),y.data("child",b),y.data("child"),T.hide(),i.append(T);var N=e("#hd_downtown");if(N.val()==E[S].id){var C=E[S].name;(function(e){setTimeout(function(){e.next().html(C)},40)})(N)}}}}o.append(f)}n.html(o)})},"json").fail(function(){e.alert("加载地区信息出错，请稍后重试！")}),e(".area-input .area").click(function(){e(".area-input .area").removeClass("active"),e(".area-content").not(e(this).find(".area-content")).hide(),e(this).find(".area-content").toggle();var t=e(this).closest(".area-row");return e(this).find(".area-content:visible").size()?(e(this).addClass("active"),t.css("zIndex",44)):(e(this).removeClass("active"),t.css("zIndex",22)),!1}),e(".area-input .area-content").on("click","ul",function(){return!1}),e(".area-input .area-content").on("click","li",function(){var t=e(this).closest(".area");return t.find("input").val(e(this).data("value")),t.children("span").html(e(this).html()),t.trigger("click"),!1}),e("body").click(function(){e(".area-content").hide(),e(".area-input .area").removeClass("active"),e(".area-row").css("zIndex",22)})}}});